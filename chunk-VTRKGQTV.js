import{B as te}from"./chunk-4MDFEKZQ.js";import{a as ve,b as Ce,d as he,e as xe,g as be,h as De}from"./chunk-TCCC26L2.js";import{D as ue,I as fe,X as _e,Y as ge,a as ie,b as oe,c as re,d as ne,e as ae,f as h,g as ce,h as le,i as se,j as de,k as pe,x as me}from"./chunk-MGW7QAEH.js";import{$a as I,$c as Z,Bc as Y,Eb as O,Gb as U,Ja as y,La as p,O as x,Oa as w,R as A,Ra as R,Sa as H,Ta as G,U as g,Ua as Q,V as b,Va as n,Wa as a,Wc as K,Xa as f,aa as F,ba as j,bb as m,db as u,dc as W,fc as E,ia as D,ib as B,jb as k,kb as T,mb as _,nd as ee,ob as v,pa as N,qb as $,qc as J,rb as z,sa as V,sb as q,va as d,vb as C,wa as L,xc as X}from"./chunk-W5AWQ2AG.js";import"./chunk-GAL4ENT6.js";var Re=()=>({"background-color":"#f9fafb",color:"##6b7280"});function ke(e,i){e&1&&f(0,"phantom-empty",0),e&2&&p("description","PAGE_RESOURCE_EMPTY")}function Te(e,i){if(e&1){let c=I();n(0,"div",6)(1,"div",7),_(2),a(),n(3,"div",8),m("click",function(){F(c);let o=u(),r=o.$implicit,l=o.$index,s=u(2);return j(s.onEditResource(r,l))}),n(4,"p-avatar",9),f(5,"i",10),a()()()}if(e&2){let c=u().$implicit;d(2),v(" ",c.topic||"N/A"," "),d(2),w(C(3,Re))}}function Ee(e,i){if(e&1&&(n(0,"div",11)(1,"span",12),_(2),a(),n(3,"span",12),_(4),O(5,"date"),a()()),e&2){let c=u().$implicit;d(2),v(" Add by ",c.resource_owner||"N/A"," "),d(2),v(" ",U(5,2,c.create_date||"N/A","hh:mm:aa dd/MM/yyyy")," ")}}function Se(e,i){if(e&1&&f(0,"p",4),e&2){let c=u().$implicit;p("innerHTML",c.content,N)}}function Me(e,i){if(e&1&&(n(0,"section",5),f(1,"iframe",13),a()),e&2){let c=u().$implicit,t=u(2);d(),p("src",t.getEmbedLink(c.content),V)}}function Pe(e,i){if(e&1&&(n(0,"p-panel",1),y(1,Te,6,4,"ng-template",2)(2,Ee,6,5,"ng-template",3)(3,Se,1,1,"p",4)(4,Me,2,1,"section",5),a()),e&2){let c=i.$implicit,t=u(2);p("toggleable",!0)("collapsed",!0)("expandIcon","pi pi-angle-up")("collapseIcon","pi pi-angle-down"),d(3),R(t.checkPath(c.content)?-1:3),d(),R(t.checkPath(c.content)?4:-1)}}function Fe(e,i){if(e&1&&G(0,Pe,5,6,"p-panel",1,H),e&2){let c=u();Q(c.listResource)}}var M=(()=>{let i=class i{constructor(t){this.sanitizer=t,this.listResource=[],this.onEditResourceEvent=D()}addResource(t){this.listResource.push(t)}onEditResource(t,o){this.onEditResourceEvent.emit({data:t,index:o})}checkPath(t){return(new DOMParser().parseFromString(t,"text/html").querySelector("a")?.href||"").includes("youtube.com")}getEmbedLink(t){let l=new DOMParser().parseFromString(t,"text/html").querySelector("a")?.href||"",s=this.convertToEmbedUrl(l);return s=this.sanitizer.bypassSecurityTrustResourceUrl(s),s}convertToEmbedUrl(t){let o=t.match(/v=([^&]+)/);return o?`https://www.youtube.com/embed/${o[1]}`:""}};i.\u0275fac=function(o){return new(o||i)(L(J))},i.\u0275cmp=g({type:i,selectors:[["project-resource-list"]],outputs:{onEditResourceEvent:"onEditResourceEvent"},decls:2,vars:1,consts:[[3,"description"],["styleClass","mb-4",3,"toggleable","collapsed","expandIcon","collapseIcon"],["pTemplate","header"],["pTemplate","footer"],[1,"m-0",3,"innerHTML"],[1,"flex","justify-content-center"],[1,"flex","align-items-center","justify-content-between","w-full"],[1,"font-bold"],[1,"flex","align-items-center","justify-content-center","cursor-pointer",2,"width","28px","height","28px",3,"click"],["styleClass","mr-2 hover:bg-gray-100","shape","circle"],[1,"pi","pi-pencil"],[1,"flex","flex-wrap","align-items-center","justify-content-between","gap-3"],[1,"text-400","text-sm"],["width","560","height","315","frameborder","0","allowfullscreen","",3,"src"]],template:function(o,r){o&1&&y(0,ke,1,1,"phantom-empty",0)(1,Fe,2,0),o&2&&R(r.listResource.length?1:0)},dependencies:[Z,me,fe,be,W]});let e=i;return e})();var Le=()=>({width:"50vw"}),Ie=()=>({height:"320px"}),P=(()=>{let i=class i{constructor(){this.visible=!1,this.formGroup=new ae({topic:new h(null,oe.required),content:new h(null),resource_owner:new h(null),create_date:new h(null)}),this.messageService=A(K),this.onAddResource=D()}editResource(t){this.visible=!0,this.formGroup.patchValue(t.data)}onCloseDialog(t){this.visible=t,this.formGroup.reset()}showMessage(t,o,r){this.messageService.add({key:"app",severity:t,summary:o,detail:r})}validateForm(){if(this.formGroup.invalid){this.formGroup.controls.topic.markAsDirty(),this.showMessage("warn","Error","Please fill in all required fields");return}let t=this.formGroup.value;t.resource_owner="Natthaphon Ditthaviboon",t.create_date=new Date,this.onAddResource.emit(t),this.onCloseDialog(!1)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=g({type:i,selectors:[["project-resource-create"]],outputs:{onAddResource:"onAddResource"},decls:20,vars:11,consts:[[3,"visibleChange","visible","icon","label","dialogstyle","showHeader","showClose"],[1,"flex","flex-column","w-full"],[1,"flex","w-full","justify-content-between","mb-4"],[1,"w-4rem","h-4rem","border-circle","flex","justify-content-center","align-items-center","bg-blue-100"],[1,"pi","pi-file","text-blue-700","text-4xl"],["pButton","","pRipple","","type","button","icon","pi pi-times",1,"p-button-rounded","p-button-secondary","p-button-text","align-self-start",3,"click"],[1,"font-semibold","text-xl","mt-0","mb-2","text-900"],[1,"font-normal","text-base","mt-0","mb-3","text-600"],[1,"mt-4",3,"formGroup"],[1,"mb-2"],["pInputText","","id","username","formControlName","topic",1,"p-inputtext-sm","w-full"],["for","username"],["formControlName","content"],[1,"pt-3","flex"],["pButton","","pRipple","","label","Cancel",1,"p-button-text","p-button-danger","p-button-sm","flex-grow-1",3,"click"],["pButton","","pRipple","","label","Add Resource",1,"p-button-sm","flex-grow-1",3,"click"]],template:function(o,r){o&1&&(n(0,"phantom-dialog",0),q("visibleChange",function(s){return z(r.visible,s)||(r.visible=s),s}),m("visibleChange",function(s){return r.onCloseDialog(s)}),n(1,"section",1)(2,"div",2)(3,"span",3),f(4,"i",4),a(),n(5,"button",5),m("click",function(){return r.visible=!1}),a()(),n(6,"p",6),_(7,"Add Resource"),a(),n(8,"p",7),_(9," Add a new resource to the project for the team to use. "),a()(),n(10,"section",8)(11,"div",9)(12,"p-floatLabel"),f(13,"input",10),n(14,"label",11),_(15,"Topic"),a()()(),f(16,"p-editor",12),a(),n(17,"div",13)(18,"button",14),m("click",function(){return r.visible=!1}),a(),n(19,"button",15),m("click",function(){return r.validateForm()}),a()()()),o&2&&($("visible",r.visible),p("icon","pi pi-file")("label","BUTTON_ADD_RESOURCE_LABEL")("dialogstyle",C(9,Le))("showHeader",!1)("showClose",!1),d(10),p("formGroup",r.formGroup),d(6),w(C(10,Ie)))},dependencies:[ie,re,ne,ce,le,ee,pe,ue,_e,ve]});let e=i;return e})();var ye=(()=>{let i=class i{constructor(){this.isAddResource=!1}addResource(t){this.projectResourceList.addResource(t)}editResource(t){this.projectResourceCreate.editResource(t)}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=g({type:i,selectors:[["app-project-resource"]],viewQuery:function(o,r){if(o&1&&(B(M,5),B(P,5)),o&2){let l;k(l=T())&&(r.projectResourceList=l.first),k(l=T())&&(r.projectResourceCreate=l.first)}},decls:5,vars:1,consts:[[1,"p-4"],[3,"title"],[3,"onAddResource"],[3,"onEditResourceEvent"]],template:function(o,r){o&1&&(n(0,"div",0)(1,"phantom-header",1)(2,"project-resource-create",2),m("onAddResource",function(s){return r.addResource(s)}),a()(),n(3,"phantom-content")(4,"project-resource-list",3),m("onEditResourceEvent",function(s){return r.editResource(s)}),a()()()),o&2&&(d(),p("title","TITLE_RESOURCE"))},dependencies:[Ce,xe,P,M]});let e=i;return e})();var we=(()=>{class e{}return e.\u0275fac=function(c){return new(c||e)},e.\u0275mod=b({type:e}),e.\u0275inj=x({imports:[E,te]}),e})();var Oe=[{path:"",component:ye}],Bt=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=b({type:i}),i.\u0275inj=x({imports:[E,X.forChild(Oe),se,de,ge,we,he,Y,De]});let e=i;return e})();export{Bt as ProjectResourceModule};
