<div class="p-3 surface-overlay border-1 surface-border border-round">
  <div class="surface-overlay">
    <div class="flex justify-content-between pb-2 surface-borderd">
      <div class="p-3">
        <span class="text-xl font-medium text-900">{{
          "MENU_LIST" | translate
        }}</span>
      </div>
      <div class="flex align-items-center mt-2 md:mt-0">
        <span class="p-input-icon-left mr-2">
          <i class="pi pi-search" icon="pi "></i>
          <input
            type="text"
            pInputText
            placeholder="{{ 'SEARCH_TEXT' | translate }}"
            class="p-inputtext-sm w-20rem"
          />
        </span>
        <span>
          <thy-button
            thyType="primary"
            thySize="default"
            (click)="isOnCreateIssue = true"
          >
            Create Sprin
          </thy-button>
        </span>
      </div>
    </div>
  </div>

  <p-divider></p-divider>

  <p-treeTable
    [value]="files"
    selectionMode="checkbox"
    [(selectionKeys)]="selectionKeys"
    dataKey="key"
    [scrollable]="true"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="header" let-columns let-rowData="rowData">
      <tr>
        <th><p-treeTableHeaderCheckbox /></th>
        <th [ttSortableColumn]="">Type <p-treeTableSortIcon /></th>
        <th style="width: 250px" pSortableColumn="summary">
          Summary <p-treeTableSortIcon field="summary" />
        </th>
        <th pSortableColumn="status">
          Status <p-treeTableSortIcon field="status" />
        </th>
        <th>Size</th>
        <th>Type</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowNode let-rowData="rowData">
      <tr [ttRow]="rowNode" [ttSelectableRow]="rowNode">
        <td>
          <p-treeTableCheckbox [value]="rowNode" />
        </td>
        <td>
          @if (rowData.type == "TASK") {
          <span class="p-tag p-tag-success">{{ rowData.type }}</span>
          } @else if (rowData.type == "BUG") {
          <span class="p-tag p-tag-danger">{{ rowData.type }}</span>
          }
        </td>
        <td style="width: 250px">
          <p-treeTableToggler [rowNode]="rowNode" />
          {{ rowData.summary }}
        </td>
        <td>
          @if (rowData.status == "TODO") {
          <span class="p-tag bg-gray-400">{{ rowData.status }}</span>
          } @else if (rowData.status == "IN PROGRESS") {
          <span class="p-tag p-tag-warning">{{ rowData.status }}</span>
          } @else if (rowData.status == "DONE") {
          <span class="p-tag p-tag-success">{{ rowData.status }}</span>
          }
        </td>
        <td [ttEditableColumn]="rowData.sprint" ttEditableColumnField="sprint">
          <p-treeTableCellEditor>
            <ng-template pTemplate="input">
              <p-dropdown
                [options]="options"
                optionLabel="label"
                class="p-dropdown-sm"
              >
              </p-dropdown>
            </ng-template>
            <ng-template pTemplate="output">
              {{ rowData.sprint }}
            </ng-template>
          </p-treeTableCellEditor>
        </td>
        <td
          [ttEditableColumn]="rowData.sprint"
          ttEditableColumnField="assignee"
        >
          <p-treeTableCellEditor>
            <ng-template pTemplate="input">
              <p-dropdown
                [options]="optionsAssignee"
                optionLabel="label"
                class="p-dropdown-sm"
              >
              </p-dropdown>
            </ng-template>
            <ng-template pTemplate="output">
              {{ rowData.sprint }}
            </ng-template>
          </p-treeTableCellEditor>
        </td>
      </tr>
    </ng-template>
  </p-treeTable>

  <p-dialog
    header="Create Issue"
    [(visible)]="isOnCreateIssue"
    [modal]="true"
    [style]="{ 'min-width': '50vw' }"
    styleClass="p-3"
  >
    <span class="p-text-secondary block mb-5"> Create a new issue </span>
    <div [formGroup]="formGroup">
      <div class="grid">
        <div class="col-3">
          <label for="username" class="font-semibold w-6rem">Issue Type</label>
        </div>
        <div class="col-9">
          <p-dropdown
            [options]="optionsType"
            optionLabel="label"
            placeholder="Select Type"
            formControlName="type"
            styleClass="w-full"
          >
          </p-dropdown>
        </div>
      </div>

      <div class="grid">
        <div class="col-3">
          <label for="username" class="font-semibold w-6rem">Issue Name</label>
        </div>
        <div class="col-9">
          <input
            type="text"
            pInputText
            class="p-inputtext-sm w-full"
            formControlName="summary"
          />
        </div>
      </div>

      <div class="grid">
        <div class="col-3">
          <label for="username" class="font-semibold w-6rem">Assign To</label>
        </div>
        <div class="col-9">
          <p-dropdown
            appendTo="body"
            [options]="optionsAssignee"
            optionLabel="label"
            placeholder="Select Assignee"
            formControlName="assignee"
            styleClass="w-full"
          >
          </p-dropdown>
        </div>
      </div>

      <div class="grid">
        <div class="col-3">
          <label for="username" class="font-semibold w-6rem">Sprint</label>
        </div>
        <div class="col-9">
          <p-dropdown
            appendTo="body"
            [options]="options"
            optionLabel="label"
            placeholder="Select Assignee"
            formControlName="sprint"
            styleClass="w-full"
          >
          </p-dropdown>
        </div>
      </div>
    </div>
    <p-footer>
      <thy-button
      class="mr-2"
      thyType="outline-default"
      thySize="default"
      (click)="isOnCreateIssue = false"
    >
      cancel
    </thy-button>
    <thy-button thyType="primary" thySize="default" (click)="onCreateIssue()">
      <i class="pi pi-save mr-2"></i>
      Save
    </thy-button>
    </p-footer>
  </p-dialog>
</div>
